(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(19),r=n.n(o),s=(n(10),n(8)),i=n(3),u=n(0);function l(e){var t=e.onClick;return Object(u.jsx)("button",{onClick:function(){return t(1)},className:"Button",type:"button",children:" Load more"})}var h=n(20),j=n.n(h);function m(e){return e.images.map((function(e){var t=e.webformatURL,n=e.id,a=e.tags;return Object(u.jsx)("li",{className:"ImageGalleryItem",children:Object(u.jsx)("img",{id:n,src:t,alt:a,className:"ImageGalleryItem-image"})},n)}))}function b(e){var t=e.onModalOpen,n=e.images;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("ul",{onClick:t,className:"ImageGallery",children:Object(u.jsx)(m,{images:n})})})}function d(){return Object(u.jsxs)("div",{className:"lds-ellipsis",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})}function g(e){var t=e.onModalCloseByEsc,n=e.onModalClose,c=e.onKeyDown,o=e.largeImg;return Object(a.useEffect)((function(){console.log("addEventListener"),document.addEventListener("keyup",(function(e){27===e.keyCode&&t()}))})),Object(u.jsx)("div",{onClick:n,onKeyDown:c,className:"Overlay",children:Object(u.jsx)("div",{className:"Modal",children:Object(u.jsx)("img",{className:"LargeGalleryImage",src:o,alt:""})})})}b.propTyppes={onModalOpen:j.a.func};var f=n(21),O=n(22),p=n(23),y=n.n(p);function v(e){var t=e.onSearchFormSubmit,n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],r=c[1];return Object(u.jsx)("header",{className:"Searchbar",children:Object(u.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),r("")):alert("Add your search query")},children:[Object(u.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(u.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(u.jsx)("input",{onChange:function(e){r(e.target.value)},name:"searh",value:o,className:"SearchForm-input",type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})}var x=new(function(){function e(){Object(f.a)(this,e),this._searchQuery="",this.page=1}return Object(O.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"searchPage",get:function(){return this.page},set:function(e){return this.page=e}},{key:"resetPage",value:function(){return this.page=1}},{key:"searchPhotos",value:function(){var e="https://pixabay.com/api/"+"?q=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12&image_type=photo&orientation=horizontal&key=").concat("23221080-2cf2140e9411e0421a0100dec");return y.a.get(e).then((function(e){return e})).catch((function(e){console.log(e)}))}}]),e}());function S(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(1),r=Object(i.a)(o,2),h=r[0],j=r[1],m=Object(a.useState)([]),f=Object(i.a)(m,2),O=f[0],p=f[1],y=Object(a.useState)("init"),S=Object(i.a)(y,2),k=S[0],N=S[1],w=Object(a.useState)(!1),C=Object(i.a)(w,2),I=C[0],E=C[1],M=Object(a.useState)(""),F=Object(i.a)(M,2),P=F[0],L=F[1];Object(a.useEffect)((function(){""!==n&&(window.scrollTo({top:document.documentElement,behavior:"smooth"}),x.resetPage(),N("pending"),j(1),x.searchQuery=n,x.searchPhotos().then((function(e){0!==e.data.hits.length?p(Object(s.a)(e.data.hits)):alert("Nothing to show! Change your search query")})).then(j((function(e){return e+1}))).finally((function(){N("success")})))}),[n]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v,{onSearchFormSubmit:function(e){c(e)}}),Object(u.jsx)(b,{images:O,onModalOpen:function(e){var t=O.find((function(t){return t.id.toString()===e.target.id}));E(!I),L(t.largeImageURL)}}),"pending"===k&&Object(u.jsx)(d,{}),O.length>0&&Object(u.jsx)(l,{onClick:function(e){N("pending"),j(h+1),x.searchPage=h,x.searchPhotos().then((function(e){p((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.data.hits))}))})).catch((function(e){console.log(e)})).finally((function(){N("success"),window.scrollTo({top:document.documentElement.scrollHeight-1200,behavior:"smooth"})}))}}),I&&Object(u.jsx)(g,{onModalClose:function(e){"Overlay"===e.target.className&&"Overlay"===e.currentTarget.className&&E(!I)},onModalCloseByEsc:function(){E(!1)},largeImg:P})]})}r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.b5732c90.chunk.js.map